import telebot
import time
import json

bot = telebot.TeleBot('')


@bot.message_handler(commands=['start'])
def set_reminder(message):
    try:
        chat_id = message.chat.id
        bot.register_next_step_handler(message, set_time)
    except Exception as e:
        bot.reply_to(message, 'An error occurred.')


def set_time(message):
    try:
        chat_id = message.chat.id
        with open("jsonchek2.json", 'r') as file:
            lst2 = json.load(file)
        reminder_time = lst2[0]
        current_time = time.strftime('%H:%M')

        while current_time != reminder_time:
            time.sleep(1)
            current_time = time.strftime('%H:%M')

        bot.send_message(chat_id, "Reminder: It's time!")

    except Exception as e:
        bot.reply_to(message, 'An error occurred.')


bot.polling()
